<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ours to Keep - Lirik</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            color: #e5e7eb; /* gray-200 */
        }
        /* Blurred Background */
        #background-layer {
            position: fixed;
            top: -20px; left: -20px; right: -20px; bottom: -20px;
            background-image: url('https://placehold.co/1920x1080/1e1b2e/a78bfa?text=Ours+to+Keep');
            background-size: cover;
            background-position: center;
            filter: blur(20px) brightness(0.4);
            z-index: -2;
        }
        /* Gradient Overlay */
        #gradient-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to top, rgba(17, 24, 39, 0.9) 15%, transparent 50%);
            z-index: -1;
        }
        /* Lyrics Container */
        #lyrics-container {
            scroll-behavior: smooth;
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }
        #lyrics-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari */
        }
        /* Individual Lyric Line Style */
        .lyric-line {
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 0.3;
            transform: scale(0.95);
            font-weight: 500;
        }
        /* Active Lyric Line Style */
        .lyric-line.active {
            opacity: 1;
            transform: scale(1);
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }
        /* Custom Range Slider */
        input[type="range"] {
            -webkit-appearance: none; appearance: none;
            width: 100%; height: 4px; background: rgba(255, 255, 255, 0.2);
            border-radius: 4px; outline: none; transition: all 0.2s; cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            width: 14px; height: 14px; background: #fff; border-radius: 50%;
        }
    </style>
</head>
<body class="bg-gray-900">

    <div id="background-layer"></div>
    <div id="gradient-overlay"></div>

    <div class="h-screen w-screen flex flex-col">
        <!-- Main Lyrics Viewport -->
        <main id="lyrics-container" class="flex-grow w-full max-w-4xl mx-auto overflow-y-auto pt-[50vh] pb-[50vh]">
            <div id="lyrics-list" class="flex flex-col items-center justify-center space-y-6 text-3xl md:text-4xl lg:text-5xl text-center px-4">
                <!-- Lyrics will be inserted here -->
            </div>
        </main>
        
        <!-- Bottom Controls -->
        <footer class="w-full max-w-4xl mx-auto p-4 md:p-6">
            <div class="flex items-center space-x-4 mb-3">
                <img src="https://placehold.co/80x80/1e1b2e/a78bfa?text=OK" alt="Album Mini" class="w-14 h-14 rounded-lg shadow-md">
                <div>
                    <h2 class="font-bold text-white text-lg">Ours to Keep</h2>
                    <p class="text-sm text-gray-400">Kendis</p>
                </div>
            </div>
            
            <div class="space-y-2">
                <input type="range" id="progressBar" value="0" min="0">
                <div class="flex justify-between text-xs font-mono text-gray-400">
                    <span id="currentTime">0:00</span>
                    <span id="totalDuration">0:00</span>
                </div>
            </div>

            <div class="flex items-center justify-center mt-2">
                <button id="playPauseButton" class="text-white text-3xl w-20 h-20 flex items-center justify-center">
                    <i id="playPauseIcon" class="fas fa-play"></i>
                </button>
            </div>
        </footer>
    </div>
    
    <!-- Hidden YouTube Player -->
    <div id="player" class="hidden"></div>

    <script>
        // --- DOM ELEMENTS ---
        const playPauseButton = document.getElementById('playPauseButton');
        const playPauseIcon = document.getElementById('playPauseIcon');
        const lyricsList = document.getElementById('lyrics-list');
        const lyricsContainer = document.getElementById('lyrics-container');
        const progressBar = document.getElementById('progressBar');
        const currentTimeEl = document.getElementById('currentTime');
        const totalDurationEl = document.getElementById('totalDuration');

        // --- STATE ---
        let player, isPlaying = false, hasStarted = false, currentLyricIndex = -1, syncInterval;
        
        const songLyrics = [
            { text: "Do you ever feel the need to get away from me? (I've been missing you)", time: 2.0 },
            { text: "Do I bore you? (Voice on the other side)", time: 8.5 },
            { text: "Or do you want to", time: 12.0 },
            { text: "Take me from this crowded place to (I've been dreaming of you)", time: 15.5 },
            { text: "Somewhere we can find some peace (and I can hear you singing)", time: 22.0 },
            { text: "And the world is ours to keep (through the silent night)", time: 28.0 }
        ];
        
        // --- YOUTUBE API SETUP ---
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                videoId: 'PwrrwedlD0M',
                playerVars: { 'playsinline': 1, 'controls': 0, 'disablekb': 1, 'fs': 0, 'iv_load_policy': 3, 'modestbranding': 1, 'rel': 0, 'showinfo': 0 },
                events: { 'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange }
            });
        }
        
        function onPlayerReady(event) {
            populateLyrics();
            const duration = player.getDuration();
            progressBar.max = duration;
            totalDurationEl.textContent = formatTime(duration);
        }
        
        function onPlayerStateChange(event) {
            isPlaying = (event.data === YT.PlayerState.PLAYING);
            updateUI();
            if (isPlaying) {
                if (!syncInterval) syncInterval = setInterval(syncLyricsAndProgress, 200);
            } else {
                clearInterval(syncInterval);
                syncInterval = null;
                if (event.data === YT.PlayerState.ENDED) resetPlayer();
            }
        }
        
        // --- EVENT LISTENERS ---
        playPauseButton.addEventListener('click', togglePlayPause);
        progressBar.addEventListener('input', (e) => player.seekTo(e.target.value, true));
        
        // --- FUNCTIONS ---
        function togglePlayPause() {
            if (!player) return;
            if (!hasStarted) {
                player.seekTo(songLyrics[0].time, true);
                hasStarted = true;
            }
            isPlaying ? player.pauseVideo() : player.playVideo();
        }

        function populateLyrics() {
            lyricsList.innerHTML = songLyrics.map((lyric, index) =>
                `<p class="lyric-line" id="lyric-${index}">${lyric.text}</p>`
            ).join('');
        }
        
        function syncLyricsAndProgress() {
            if (!player.getCurrentTime) return;
            const currentTime = player.getCurrentTime();
            progressBar.value = currentTime;
            currentTimeEl.textContent = formatTime(currentTime);

            let newActiveIndex = -1;
            for (let i = 0; i < songLyrics.length; i++) {
                if (currentTime >= songLyrics[i].time) newActiveIndex = i;
                else break;
            }

            if (newActiveIndex !== currentLyricIndex) {
                document.getElementById(`lyric-${currentLyricIndex}`)?.classList.remove('active');
                const activeEl = document.getElementById(`lyric-${newActiveIndex}`);
                if (activeEl) {
                    activeEl.classList.add('active');
                    // Scroll active lyric to center
                    const containerRect = lyricsContainer.getBoundingClientRect();
                    const elRect = activeEl.getBoundingClientRect();
                    const scrollTop = lyricsContainer.scrollTop + (elRect.top - containerRect.top) - (containerRect.height / 2) + (elRect.height / 2);
                    lyricsContainer.scrollTo(0, scrollTop);
                }
                currentLyricIndex = newActiveIndex;
            }
        }
        
        function updateUI() {
            playPauseIcon.className = isPlaying ? 'fas fa-pause' : 'fas fa-play';
        }

        function formatTime(seconds) {
            const min = Math.floor(seconds / 60);
            const sec = Math.floor(seconds % 60).toString().padStart(2, '0');
            return `${min}:${sec}`;
        }

        function resetPlayer() {
            hasStarted = false;
            player.seekTo(songLyrics[0].time, true);
            player.pauseVideo();
        }
    </script>
</body>
</html>


