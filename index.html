<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ours to Keep - Kendis</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Icon Library for Volume -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
        }
        #audio-visualizer {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
        }
        /* Glassmorphism Effect */
        .glass-card {
            background: rgba(23, 23, 33, 0.6);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Custom Lyric Styling */
        .lyric-line {
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 0.4;
            transform: scale(0.95);
            font-weight: 500;
        }
        .lyric-line.active {
            opacity: 1;
            transform: scale(1.05);
            font-weight: 700;
            color: #fff;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }
        /* Custom Range Slider (Progress & Volume) */
        input[type="range"] {
            -webkit-appearance: none; appearance: none;
            width: 100%; height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            outline: none;
            cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            width: 15px; height: 15px;
            background: #fff;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        input[type="range"]::-moz-range-thumb {
            width: 15px; height: 15px;
            background: #fff;
            border-radius: 50%;
        }
        input[type="range"]:hover::-webkit-slider-thumb {
            background: #a78bfa; /* Violet */
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <canvas id="audio-visualizer"></canvas>

    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-sm glass-card rounded-3xl shadow-2xl overflow-hidden">
            <!-- Album Art Section -->
            <div class="relative">
                <img src="https://placehold.co/600x400/1e1b2e/a78bfa?text=Ours+to+Keep" alt="Album Art" class="w-full h-48 object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                <div class="absolute bottom-4 left-4">
                    <h1 class="text-3xl font-bold text-white">Ours to Keep</h1>
                    <p class="text-md text-gray-300">Kendis</p>
                </div>
            </div>

            <div class="p-6 flex flex-col space-y-6">
                <!-- Lyrics Area -->
                <div id="lyricsContainer" class="text-center text-lg leading-relaxed h-20 overflow-y-auto scrollbar-hide">
                    <!-- Lyrics will be dynamically inserted here -->
                </div>

                <!-- Progress Bar & Time -->
                <div class="space-y-2">
                    <input type="range" id="progressBar" value="0" min="0" class="w-full">
                    <div class="flex justify-between text-xs font-mono">
                        <span id="currentTime">0:00</span>
                        <span id="totalDuration">0:00</span>
                    </div>
                </div>

                <!-- Controls -->
                <div class="flex items-center justify-between">
                     <!-- Volume Control -->
                    <div class="flex items-center space-x-2 w-1/3">
                        <i class="fas fa-volume-down text-gray-400"></i>
                        <input type="range" id="volumeSlider" value="50" min="0" max="100" class="w-full">
                    </div>
                    <!-- Play/Pause Button -->
                    <button id="playPauseButton" class="bg-violet-500 hover:bg-violet-600 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg transform transition duration-300 hover:scale-110 focus:outline-none">
                        <i id="playPauseIcon" class="fas fa-play text-2xl"></i>
                    </button>
                    <div class="w-1/3"></div> <!-- Spacer -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hidden YouTube Player -->
    <div id="player" class="hidden"></div>

    <script>
        // --- YOUTUBE PLAYER & UI SCRIPT ---
        const playPauseButton = document.getElementById('playPauseButton');
        const playPauseIcon = document.getElementById('playPauseIcon');
        const lyricsContainer = document.getElementById('lyricsContainer');
        const progressBar = document.getElementById('progressBar');
        const currentTimeEl = document.getElementById('currentTime');
        const totalDurationEl = document.getElementById('totalDuration');
        const volumeSlider = document.getElementById('volumeSlider');

        let player;
        let isPlaying = false;
        let hasStarted = false;
        let currentLyricIndex = -1;
        let lyricInterval;

        const songLyrics = [
            { text: "Do you ever feel the need to get away from me? (I've been missing you)", time: 2.0 },
            { text: "Do I bore you? (Voice on the other side)", time: 8.5 },
            { text: "Or do you want to", time: 12.0 },
            { text: "Take me from this crowded place to (I've been dreaming of you)", time: 15.5 },
            { text: "Somewhere we can find some peace (and I can hear you singing)", time: 22.0 },
            { text: "And the world is ours to keep (through the silent night)", time: 28.0 }
        ];

        // Load YouTube API
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0', width: '0', videoId: 'PwrrwedlD0M',
                playerVars: { 'playsinline': 1, 'autoplay': 0, 'controls': 0, 'disablekb': 1, 'fs': 0, 'iv_load_policy': 3, 'modestbranding': 1, 'rel': 0, 'showinfo': 0 },
                events: { 'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange }
            });
        }

        function onPlayerReady(event) {
            displayAllLyrics();
            player.setVolume(volumeSlider.value);
            const duration = player.getDuration();
            progressBar.max = duration;
            totalDurationEl.textContent = formatTime(duration);
        }

        function onPlayerStateChange(event) {
            isPlaying = (event.data === YT.PlayerState.PLAYING);
            updateButtonUI();
            if (isPlaying) {
                startLyricSync();
                startVisualizer();
            } else {
                stopLyricSync();
                stopVisualizer();
                if (event.data === YT.PlayerState.ENDED) resetPlayer();
            }
        }
        
        // --- Controls Logic ---
        playPauseButton.addEventListener('click', () => {
            if (!player) return;
            if (!hasStarted) {
                player.seekTo(songLyrics[0].time, true);
                hasStarted = true;
            }
            isPlaying ? player.pauseVideo() : player.playVideo();
        });

        progressBar.addEventListener('input', (e) => player.seekTo(e.target.value, true));
        volumeSlider.addEventListener('input', (e) => player.setVolume(e.target.value));
        
        // --- UI & Lyric Sync ---
        function updateButtonUI() {
            playPauseIcon.className = isPlaying ? 'fas fa-pause text-2xl' : 'fas fa-play text-2xl';
        }

        function formatTime(seconds) {
            const min = Math.floor(seconds / 60);
            const sec = Math.floor(seconds % 60).toString().padStart(2, '0');
            return `${min}:${sec}`;
        }

        function displayAllLyrics() {
            lyricsContainer.innerHTML = songLyrics.map((lyric, index) => 
                `<p class="lyric-line" id="lyric-${index}">${lyric.text}</p>`
            ).join('');
        }
        
        function syncUI() {
            const currentTime = player.getCurrentTime();
            progressBar.value = currentTime;
            currentTimeEl.textContent = formatTime(currentTime);

            let newActiveIndex = -1;
            for (let i = 0; i < songLyrics.length; i++) {
                if (currentTime >= songLyrics[i].time - 0.5) newActiveIndex = i;
                else break;
            }
            if (newActiveIndex !== currentLyricIndex) {
                document.getElementById(`lyric-${currentLyricIndex}`)?.classList.remove('active');
                const activeEl = document.getElementById(`lyric-${newActiveIndex}`);
                if (activeEl) {
                    activeEl.classList.add('active');
                    activeEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                currentLyricIndex = newActiveIndex;
            }
        }

        function startLyricSync() {
            if (!lyricInterval) lyricInterval = setInterval(syncUI, 250);
        }

        function stopLyricSync() {
            clearInterval(lyricInterval);
            lyricInterval = null;
        }

        function resetPlayer() {
            hasStarted = false;
            player.seekTo(songLyrics[0].time, true);
            player.pauseVideo();
        }
        
        // --- SIMULATED AUDIO VISUALIZER ---
        const canvas = document.getElementById('audio-visualizer');
        const ctx = canvas.getContext('2d');
        let animationFrameId;
        let isVisualizerActive = false;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        let t = 0; // time variable for sine wave
        function drawVisualizer() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const bars = 64;
            const barWidth = canvas.width / bars;
            
            for (let i = 0; i < bars; i++) {
                // Use a sine wave for smooth, pulsing animation
                const amplitude = isVisualizerActive ? 50 + 40 * Math.sin(i * 0.3 + t) : 5;
                const barHeight = 10 + Math.abs(amplitude);
                const x = i * barWidth;
                const y = (canvas.height - barHeight) / 2;
                
                // Gradient for visual appeal
                const gradient = ctx.createLinearGradient(0, canvas.height/2, 0, canvas.height/2 - barHeight);
                gradient.addColorStop(1, 'rgba(167, 139, 250, 0.5)'); // violet-400
                gradient.addColorStop(0, 'rgba(167, 139, 250, 0.1)');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(x, y, barWidth - 2, barHeight);
            }
            t += 0.05; // Increment time to make the wave move
            animationFrameId = requestAnimationFrame(drawVisualizer);
        }

        function startVisualizer() {
            if (!isVisualizerActive) {
                isVisualizerActive = true;
                if (!animationFrameId) drawVisualizer();
            }
        }
        function stopVisualizer() { isVisualizerActive = false; }
        
        // Initial draw (static)
        drawVisualizer();

    </script>
</body>
</html>


